<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuestra Boda - Daniel y Pamela</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;700&family=Parisienne&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Cormorant Garamond', serif;
            background-color: #FBF9F7;
            color: #5d5d5d;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            position: relative; 
        }

        .corner-flower {
            position: fixed;
            width: 150px; 
            height: auto;
            z-index: 0;
        }
        
        @media (min-width: 768px) {
            .corner-flower {
                width: 200px;
            }
        }

        #top-left { top: 20px; left: 20px; }
        #top-right { top: 20px; right: 20px; transform: scaleX(-1); }
        #bottom-left { bottom: 20px; left: 20px; transform: scaleY(-1); }
        #bottom-right { bottom: 20px; right: 20px; transform: scale(-1, -1); }

        .main-container {
            position: relative;
            z-index: 1;
            width: 100%;
            max-width: 800px;
            text-align: center;
        }
        
        .content-box {
            border: 1px solid #dcd0c0;
            padding: 2rem 1rem;
            background-color: #FBF9F7; /*
        }

        @media (min-width: 768px) {
            .content-box {
                padding: 4rem 2rem;
            }
        }
        
        .font-script {
            font-family: 'Parisienne', cursive;
        }
        
        nav a {
            letter-spacing: 0.2em;
            font-size: 0.75rem;
            color: #8b7d7d;
            margin: 0 1rem;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        nav a:hover {
            color: #333;
        }
        
        .bottom-nav img {
            width: 40px;
            transition: transform 0.3s;
        }

        .bottom-nav img:hover {
            transform: scale(1.1);
        }
    </style>
</head>

<body>
    <img src="florm.png" alt="Decoración floral" class="corner-flower" id="top-left">
    <img src="florm.png" alt="Decoración floral" class="corner-flower" id="top-right">
    <img src="florm.png" alt="Decoración floral" class="corner-flower" id="bottom-left">
    <img src="florm.png" alt="Decoración floral" class="corner-flower" id="bottom-right">

    <div class="main-container">
        
        <header>
            <nav class="flex justify-center items-center mb-8 space-x-2 md:space-x-4">
                <a href="#mapa-section" class="uppercase bg-[#C6A9A9] text-white py-2 px-4 rounded-full shadow-md transition-transform transform hover:scale-105">Ubicación</a>
                <button id="openRsvpModal" class="uppercase bg-[#C6A9A9] text-white py-2 px-4 rounded-full shadow-md transition-transform transform hover:scale-105">Confirma</button>
                <a href="#etiqueta-section" class="uppercase bg-[#C6A9A9] text-white py-2 px-4 rounded-full shadow-md transition-transform transform hover:scale-105">Etiqueta</a>
            </nav>
        </header>

        <main class="content-box">
            <p class="tracking-widest text-sm mb-4">LA BODA DE</p>
            <h1 class="font-script text-6xl md:text-8xl text-[#8C6B6B] mb-4">Daniel & Pamela</h1>
            <p class="text-lg md:text-xl mb-2">Domingo, 15 de Marzo de 2026</p>
            <p class="text-md md:text-lg text-gray-600">¡Estas Invitado, No Faltes!</p>
            <nav class="flex justify-center items-center mt-8"><a href="#">NUESTRA HISTORIA</a><a href="#"><img src="icono-anillos.png" alt="Icono de anillos"></a><a href="#">GALERÍA</a></nav>
        </main>
        
        <div id="mapa-section" class="w-full max-w-3xl mt-8 text-center">
            <div class="content-box"><p class="text-lg font-bold">Salón "El Jardín"</p><p class="text-md text-gray-600">Prolongacion Jose Maria Morelos 1, Centro, 56530 Ixtapaluca, Méx., México</p><p class="text-md font-bold mt-2">1:00 pm</p><div class="w-full h-64 md:h-80 rounded-lg overflow-hidden border border-[#dcd0c0] mt-4"><iframe src="https://maps.google.com/maps?q=Cjon.%20J.%20Ma.%20Morelos%201,%20Centro,%2056530%20Ixtapaluca,%20M%C3%A9x.,%20M%C3%A9xico&t=&z=15&ie=UTF8&iwloc=&output=embed" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe></div></div>
        </div>

        <div id="etiqueta-section" class="w-full max-w-3xl mt-8 text-center">
            <div class="content-box"><h2 class="font-script text-5xl md:text-6xl text-[#8C6B6B] mb-6">Etiqueta del Evento</h2><div class="mb-6"><img src="etiqueta-img.png" alt="Consejos de etiqueta para la boda" class="w-full max-w-sm mx-auto rounded-lg shadow-md"></div><div class="text-left space-y-4 text-gray-700 md:px-8"><div><p class="font-bold text-lg mb-1">Código de Vestimenta</p><p>Agradecemos su presencia y les sugerimos un **atuendo formal** para esta ocasión tan especial.</p></div><div><p class="font-bold text-lg mb-1">Normas del Lugar</p><p>Les informamos que está **prohibido fumar** en todas las áreas del salón para la comodidad de todos los asistentes.</p></div><div><p class="font-bold text-lg mb-1">Estacionamiento</p><p>Contamos con **estacionamiento gratuito** dentro de las instalaciones del Salón "El Jardín".</p></div><div><p class="font-bold text-lg mb-1">Asientos Asignados</p><p>Al llegar, nuestro equipo les indicará su **lugar asignado**. Les pedimos amablemente seguir las indicaciones para mantener la organización del evento.</p></div></div></div>
        </div>
        
        <footer class="mt-8 text-xs text-gray-500"><p>© 2025 Daniel & Pamela</p></footer>
    </div>

    <div id="rsvpModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden opacity-0 z-50 transition-opacity duration-300">
        <div class="bg-white rounded-lg shadow-xl p-8 max-w-md w-full text-center relative">
            <button id="closeRsvpModal" class="absolute top-2 right-4 text-2xl text-gray-500 hover:text-gray-800">×</button>
            <h3 class="font-script text-4xl text-[#8C6B6B] mb-4">Confirmar Asistencia</h3>
            <p class="mb-6 text-gray-600">Por favor, completa los siguientes datos para confirmar.</p>
            <form id="rsvpForm" class="space-y-4">
                <input type="text" id="guestName" placeholder="Nombre completo del invitado principal" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#C6A9A9]" required>
                <input type="number" id="guestCount" placeholder="Número total de asistentes (incluyéndote)" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-[#C6A9A9]" min="1" required>
                <button type="submit" id="submitRsvpBtn" class="w-full bg-[#C6A9A9] text-white font-bold py-3 px-4 rounded-lg transition-transform transform hover:scale-105">Confirmar y Descargar Boleto</button>
            </form>
        </div>
    </div>

    <div id="thankYouModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden opacity-0 z-50 transition-opacity duration-300">
        <div class="bg-white rounded-lg shadow-xl p-8 max-w-sm w-full text-center">
            <h3 class="font-script text-4xl text-[#8C6B6B] mb-4">¡Gracias!</h3>
            <p class="mb-6 text-gray-600">Tu asistencia ha sido confirmada. Tu boleto se está descargando. ¡Nos vemos en la boda!</p>
            <button id="closeThankYouModal" class="bg-[#C6A9A9] text-white font-bold py-2 px-4 rounded-lg">Cerrar</button>
        </div>
    </div>
    </body><script type="module">
        // Importar las funciones necesarias de Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore.js";

        // --- 1. CONFIGURACIÓN DE FIREBASE (CON TUS CREDENCIALES) ---
        const firebaseConfig = {
            apiKey: "AIzaSyCEFg3H7spJXUBvjNRc-QRocIHk3Hd6dho",
            authDomain: "lista-de-asistencia-8cfc5.firebaseapp.com",
            projectId: "lista-de-asistencia-8cfc5",
            storageBucket: "lista-de-asistencia-8cfc5.firebasestorage.app",
            messagingSenderId: "276452664903",
            appId: "1:276452664903:web:8b060bdeef2e70852bf362"
        };

        // Inicializar Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // --- 2. LÓGICA DE LOS MODALES ---
        const rsvpModal = document.getElementById('rsvpModal');
        const thankYouModal = document.getElementById('thankYouModal');
        const openRsvpModalBtn = document.getElementById('openRsvpModal');
        const closeRsvpModalBtn = document.getElementById('closeRsvpModal');
        const closeThankYouModalBtn = document.getElementById('closeThankYouModal');
        const rsvpForm = document.getElementById('rsvpForm');
        const submitRsvpBtn = document.getElementById('submitRsvpBtn');

        const openModal = (modal) => {
            modal.classList.remove('hidden');
            setTimeout(() => modal.classList.remove('opacity-0'), 10);
        };

        const closeModal = (modal) => {
            modal.classList.add('opacity-0');
            setTimeout(() => modal.classList.add('hidden'), 300);
        };

        openRsvpModalBtn.addEventListener('click', () => openModal(rsvpModal));
        closeRsvpModalBtn.addEventListener('click', () => closeModal(rsvpModal));
        closeThankYouModalBtn.addEventListener('click', () => closeModal(thankYouModal));

        // --- 3. LÓGICA DEL FORMULARIO Y BASE DE DATOS ---
        rsvpForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            submitRsvpBtn.disabled = true;
            submitRsvpBtn.innerText = "Confirmando...";

            const guestName = document.getElementById('guestName').value;
            const guestCount = document.getElementById('guestCount').value;

            try {
                // Guardar los datos en la base de datos de Firebase
                await addDoc(collection(db, "invitados_confirmados"), {
                    nombre: guestName,
                    asistentes: Number(guestCount),
                    fecha_confirmacion: serverTimestamp()
                });

                // Si se guarda correctamente, procede a descargar y agradecer
                downloadTicket();
                closeModal(rsvpModal);
                openModal(thankYouModal);
                rsvpForm.reset();

            } catch (error) {
                console.error("Error al guardar la confirmación: ", error);
                alert("Hubo un error al confirmar. Por favor, inténtalo de nuevo.");
            } finally {
                submitRsvpBtn.disabled = false;
                submitRsvpBtn.innerText = "Confirmar y Descargar Boleto";
            }
        });

        // --- 4. FUNCIÓN PARA DESCARGAR EL BOLETO ---
        function downloadTicket() {
            const link = document.createElement('a');
            link.href = 'boleto-boda.jpg'; // Asegúrate que tu boleto se llame así
            link.download = `Boleto_Boda_Daniel_y_Pamela.jpg`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    </script>




                



